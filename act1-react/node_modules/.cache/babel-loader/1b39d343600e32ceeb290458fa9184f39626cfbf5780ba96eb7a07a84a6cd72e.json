{"ast":null,"code":"var _s = $RefreshSig$();\nimport { useEffect, useState } from \"react\";\nexport const ArticulosTienda = () => {\n  _s();\n  const [articulos, setArticulos] = useState([]);\n  // eslint-disable-next-line react-hooks/exhaustive-deps\n  const items = ['sistema', 'c', 'automatización', 'python', 'c#', 'sql', '.net'];\n  useEffect(() => {\n    const fetchData = async () => {\n      try {\n        // Crea un array de promesas para realizar búsquedas simultáneas\n        const searchPromises = items.map(async item => {\n          const response = await fetch(`https://www.googleapis.com/books/v1/volumes?q=${item}`);\n          const data = await response.json();\n\n          // Filtra los libros que no tienen imágenes\n          const librosConImagen = data.items && Array.isArray(data.items) ? data.items.filter(book => {\n            var _book$volumeInfo$imag;\n            return (_book$volumeInfo$imag = book.volumeInfo.imageLinks) === null || _book$volumeInfo$imag === void 0 ? void 0 : _book$volumeInfo$imag.thumbnail;\n          }).map(book => {\n            var _book$saleInfo$listPr;\n            return {\n              id: book.id,\n              name: book.volumeInfo.title,\n              descripcion: book.volumeInfo.description || \"Sin descripción disponible\",\n              precio: ((_book$saleInfo$listPr = book.saleInfo.listPrice) === null || _book$saleInfo$listPr === void 0 ? void 0 : _book$saleInfo$listPr.amount) || 1000,\n              image: book.volumeInfo.imageLinks.thumbnail\n            };\n          }) : [];\n          return librosConImagen;\n        });\n\n        // Espera a que todas las solicitudes se completen con un timeout de 5 segundos\n        const resultados = await Promise.race([Promise.all(searchPromises), new Promise((_, reject) => setTimeout(() => reject(\"Tiempo de espera agotado\"), 5000))]);\n\n        // Combina los resultados en un solo array de libros\n        const libros = resultados.flat();\n        setArticulos(libros);\n      } catch (error) {\n        console.error(\"Error al obtener datos:\", error);\n      }\n    };\n    fetchData();\n  }, [items]); // No hay dependencias, se ejecuta solo una vez al montar el componente\n\n  return articulos;\n};\n_s(ArticulosTienda, \"FTp1QjCyTHjkXZ4DKlTORNSqT3M=\");\n_c = ArticulosTienda;\nvar _c;\n$RefreshReg$(_c, \"ArticulosTienda\");","map":{"version":3,"names":["useEffect","useState","ArticulosTienda","_s","articulos","setArticulos","items","fetchData","searchPromises","map","item","response","fetch","data","json","librosConImagen","Array","isArray","filter","book","_book$volumeInfo$imag","volumeInfo","imageLinks","thumbnail","_book$saleInfo$listPr","id","name","title","descripcion","description","precio","saleInfo","listPrice","amount","image","resultados","Promise","race","all","_","reject","setTimeout","libros","flat","error","console","_c","$RefreshReg$"],"sources":["C:/Users/lemor/Desktop/MAESTRIA/APP_act1/act1-react/src/hooks/ArticulosTienda.js"],"sourcesContent":["import { useEffect, useState } from \"react\";\r\n\r\nexport const ArticulosTienda = () => {\r\n  const [articulos, setArticulos] = useState([]);\r\n  // eslint-disable-next-line react-hooks/exhaustive-deps\r\n  const items = ['sistema', 'c', 'automatización', 'python', 'c#', 'sql', '.net'];\r\n\r\n  useEffect(() => {\r\n    const fetchData = async () => {\r\n      try {\r\n        // Crea un array de promesas para realizar búsquedas simultáneas\r\n        const searchPromises = items.map(async (item) => {\r\n          const response = await fetch(`https://www.googleapis.com/books/v1/volumes?q=${item}`);\r\n          const data = await response.json();\r\n\r\n          // Filtra los libros que no tienen imágenes\r\n          const librosConImagen = data.items && Array.isArray(data.items)\r\n          ? data.items\r\n          .filter((book) => book.volumeInfo.imageLinks?.thumbnail)\r\n          .map((book) => ({\r\n          id: book.id,\r\n          name: book.volumeInfo.title,\r\n          descripcion: book.volumeInfo.description || \"Sin descripción disponible\",\r\n          precio: book.saleInfo.listPrice?.amount || 1000,\r\n          image: book.volumeInfo.imageLinks.thumbnail,\r\n          }))\r\n        : [];\r\n\r\n          return librosConImagen;\r\n        });\r\n\r\n        // Espera a que todas las solicitudes se completen con un timeout de 5 segundos\r\n        const resultados = await Promise.race([\r\n          Promise.all(searchPromises),\r\n          new Promise((_, reject) => setTimeout(() => reject(\"Tiempo de espera agotado\"), 5000)),\r\n        ]);\r\n\r\n        // Combina los resultados en un solo array de libros\r\n        const libros = resultados.flat();\r\n\r\n        setArticulos(libros);\r\n      } catch (error) {\r\n        console.error(\"Error al obtener datos:\", error);\r\n      }\r\n    };\r\n\r\n    fetchData();\r\n  }, [items]); // No hay dependencias, se ejecuta solo una vez al montar el componente\r\n\r\n  return articulos;\r\n};\r\n"],"mappings":";AAAA,SAASA,SAAS,EAAEC,QAAQ,QAAQ,OAAO;AAE3C,OAAO,MAAMC,eAAe,GAAGA,CAAA,KAAM;EAAAC,EAAA;EACnC,MAAM,CAACC,SAAS,EAAEC,YAAY,CAAC,GAAGJ,QAAQ,CAAC,EAAE,CAAC;EAC9C;EACA,MAAMK,KAAK,GAAG,CAAC,SAAS,EAAE,GAAG,EAAE,gBAAgB,EAAE,QAAQ,EAAE,IAAI,EAAE,KAAK,EAAE,MAAM,CAAC;EAE/EN,SAAS,CAAC,MAAM;IACd,MAAMO,SAAS,GAAG,MAAAA,CAAA,KAAY;MAC5B,IAAI;QACF;QACA,MAAMC,cAAc,GAAGF,KAAK,CAACG,GAAG,CAAC,MAAOC,IAAI,IAAK;UAC/C,MAAMC,QAAQ,GAAG,MAAMC,KAAK,CAAE,iDAAgDF,IAAK,EAAC,CAAC;UACrF,MAAMG,IAAI,GAAG,MAAMF,QAAQ,CAACG,IAAI,CAAC,CAAC;;UAElC;UACA,MAAMC,eAAe,GAAGF,IAAI,CAACP,KAAK,IAAIU,KAAK,CAACC,OAAO,CAACJ,IAAI,CAACP,KAAK,CAAC,GAC7DO,IAAI,CAACP,KAAK,CACXY,MAAM,CAAEC,IAAI;YAAA,IAAAC,qBAAA;YAAA,QAAAA,qBAAA,GAAKD,IAAI,CAACE,UAAU,CAACC,UAAU,cAAAF,qBAAA,uBAA1BA,qBAAA,CAA4BG,SAAS;UAAA,EAAC,CACvDd,GAAG,CAAEU,IAAI;YAAA,IAAAK,qBAAA;YAAA,OAAM;cAChBC,EAAE,EAAEN,IAAI,CAACM,EAAE;cACXC,IAAI,EAAEP,IAAI,CAACE,UAAU,CAACM,KAAK;cAC3BC,WAAW,EAAET,IAAI,CAACE,UAAU,CAACQ,WAAW,IAAI,4BAA4B;cACxEC,MAAM,EAAE,EAAAN,qBAAA,GAAAL,IAAI,CAACY,QAAQ,CAACC,SAAS,cAAAR,qBAAA,uBAAvBA,qBAAA,CAAyBS,MAAM,KAAI,IAAI;cAC/CC,KAAK,EAAEf,IAAI,CAACE,UAAU,CAACC,UAAU,CAACC;YAClC,CAAC;UAAA,CAAC,CAAC,GACH,EAAE;UAEF,OAAOR,eAAe;QACxB,CAAC,CAAC;;QAEF;QACA,MAAMoB,UAAU,GAAG,MAAMC,OAAO,CAACC,IAAI,CAAC,CACpCD,OAAO,CAACE,GAAG,CAAC9B,cAAc,CAAC,EAC3B,IAAI4B,OAAO,CAAC,CAACG,CAAC,EAAEC,MAAM,KAAKC,UAAU,CAAC,MAAMD,MAAM,CAAC,0BAA0B,CAAC,EAAE,IAAI,CAAC,CAAC,CACvF,CAAC;;QAEF;QACA,MAAME,MAAM,GAAGP,UAAU,CAACQ,IAAI,CAAC,CAAC;QAEhCtC,YAAY,CAACqC,MAAM,CAAC;MACtB,CAAC,CAAC,OAAOE,KAAK,EAAE;QACdC,OAAO,CAACD,KAAK,CAAC,yBAAyB,EAAEA,KAAK,CAAC;MACjD;IACF,CAAC;IAEDrC,SAAS,CAAC,CAAC;EACb,CAAC,EAAE,CAACD,KAAK,CAAC,CAAC,CAAC,CAAC;;EAEb,OAAOF,SAAS;AAClB,CAAC;AAACD,EAAA,CAhDWD,eAAe;AAAA4C,EAAA,GAAf5C,eAAe;AAAA,IAAA4C,EAAA;AAAAC,YAAA,CAAAD,EAAA"},"metadata":{},"sourceType":"module","externalDependencies":[]}